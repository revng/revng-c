#
# This file is distributed under the MIT License. See LICENSE.md for details.
#
# Note that while there are many check lines checking only for angle brackets,
# no line break is being matched. Other check lines will match text on the same
# input line. The angle brackets are matched separately in order to ignore
# parameters other than those explicitly being checked for.
#
# RUN: %revngcliftopt /dev/null --import-model-types="import-all model=%s" | FileCheck %s

Types:
  - ID: 104
    Kind: PrimitiveType
    PrimitiveKind: Signed
    Size: 4
  - ID: 108
    Kind: PrimitiveType
    PrimitiveKind: Signed
    Size: 8
  - ID: 204
    Kind: PrimitiveType
    PrimitiveKind: Unsigned
    Size: 4
  - ID: 208
    Kind: PrimitiveType
    PrimitiveKind: Unsigned
    Size: 8

    # CHECK: #my_enum1_ = #clift.enum<
    # CHECK:   id = 1104
    # CHECK:   name = "my_enum1"
    # CHECK:   underlying_type = !int32_t
    # CHECK:   fields = [
    # CHECK:     <
    # CHECK:       raw_value = 0
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 1
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 2147483647
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 18446744071562067968
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 18446744073709551615
    # CHECK:     >
    # CHECK:   ]
    # CHECK: >
  - ID: 1104
    Kind: EnumType
    CustomName: "my_enum1"
    UnderlyingType:
      UnqualifiedType: "/Types/104-PrimitiveType"
    Entries:
      - Value: 0
      - Value: 1
      - Value: 0x000000007fffffff # 2^31 - 1
      - Value: 0xffffffff80000000 # 2^64 - 2^31
      - Value: 0xffffffffffffffff # 2^64 - 1

    # CHECK: #my_enum2_ = #clift.enum<
    # CHECK:   id = 1108
    # CHECK:   name = "my_enum2"
    # CHECK:   underlying_type = !int64_t
    # CHECK:   fields = [
    # CHECK:     <
    # CHECK:       raw_value = 0
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 1
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 9223372036854775807
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 9223372036854775808
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 18446744073709551615
    # CHECK:     >
    # CHECK:   ]
    # CHECK: >
  - ID: 1108
    Kind: EnumType
    CustomName: "my_enum2"
    UnderlyingType:
      UnqualifiedType: "/Types/108-PrimitiveType"
    Entries:
      - Value: 0
      - Value: 1
      - Value: 0x7fffffffffffffff # 2^63 - 1
      - Value: 0x8000000000000000 # 2^63
      - Value: 0xffffffffffffffff # 2^64 - 1

    # CHECK: #my_enum3_ = #clift.enum<
    # CHECK:   id = 1204
    # CHECK:   name = "my_enum3"
    # CHECK:   underlying_type = !uint32_t
    # CHECK:   fields = [
    # CHECK:     <
    # CHECK:       raw_value = 0
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 1
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 4294967295
    # CHECK:     >
    # CHECK:   ]
    # CHECK: >
  - ID: 1204
    Kind: EnumType
    CustomName: "my_enum3"
    UnderlyingType:
      UnqualifiedType: "/Types/204-PrimitiveType"
    Entries:
      - Value: 0
      - Value: 1
      - Value: 0x00000000ffffffff # 2^32 - 1

    # CHECK: #my_enum4_ = #clift.enum<
    # CHECK:   id = 1208
    # CHECK:   name = "my_enum4"
    # CHECK:   underlying_type = !uint64_t
    # CHECK:   fields = [
    # CHECK:     <
    # CHECK:       raw_value = 0
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 1
    # CHECK:     >
    # CHECK:     <
    # CHECK:       raw_value = 18446744073709551615
    # CHECK:     >
    # CHECK:   ]
    # CHECK: >
  - ID: 1208
    Kind: EnumType
    CustomName: "my_enum4"
    UnderlyingType:
      UnqualifiedType: "/Types/208-PrimitiveType"
    Entries:
      - Value: 0
      - Value: 1
      - Value: 0xffffffffffffffff # 2^64 - 1


    # CHECK: !my_enum1_1 = !clift.defined<#my_enum1_>
    # CHECK: !my_enum2_1 = !clift.defined<#my_enum2_>
    # CHECK: !my_enum3_1 = !clift.defined<#my_enum3_>
    # CHECK: !my_enum4_1 = !clift.defined<#my_enum4_>
